<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F-Lambda | Unified Physics Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@100;400;700&family=JetBrains+Mono:wght@300&display=swap');
        
        body { 
            font-family: 'Noto Sans Arabic', sans-serif; 
            background-color: #020205;
            color: #f1f5f9;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .physics-grid {
            display: grid;
            grid-template-columns: 400px 1fr;
            height: 100vh;
        }

        .theory-side {
            background: rgba(8, 8, 25, 0.95);
            border-left: 1px solid rgba(99, 102, 241, 0.1);
            display: flex;
            flex-direction: column;
            padding: 2rem;
            overflow-y: auto;
        }

        .simulation-side {
            background: radial-gradient(circle at center, #0a0a25 0%, #000 100%);
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }

        .formula-card {
            background: rgba(99, 102, 241, 0.05);
            border: 1px solid rgba(99, 102, 241, 0.15);
            border-radius: 1.5rem;
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 1.5rem;
        }

        .chat-bubble {
            font-size: 0.9rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
            padding: 1.2rem;
            border-radius: 1.2rem;
            animation: slideUp 0.5s ease-out;
        }

        .ai-bubble { background: rgba(30, 41, 59, 0.5); border-right: 3px solid #6366f1; }
        .user-bubble { background: #4f46e5; align-self: flex-end; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .constant-tag {
            font-size: 0.7rem;
            background: rgba(99, 102, 241, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            color: #818cf8;
        }

        .input-area {
            background: #0f172a;
            border: 1px solid #1e293b;
            border-radius: 1rem;
            padding: 1rem;
            width: 100%;
            color: white;
            outline: none;
            resize: none;
        }
    </style>
</head>
<body>

<div class="physics-grid">
    <!-- Theory & Discussion Panel -->
    <aside class="theory-side">
        <div class="mb-6">
            <h1 class="text-indigo-400 font-bold tracking-widest text-xs">Fλ-CORE // PHYSICS ENGINE</h1>
            <p class="text-[9px] text-indigo-700 uppercase mt-1">وحدة تحليل القوانين الموحدة</p>
        </div>

        <div id="chat-flow" class="flex-grow overflow-y-auto pr-2 scrollbar-hide">
            <div class="chat-bubble ai-bubble">
                <p class="font-bold mb-2">مقام التحليل الفيزيائي:</p>
                لقد استقبلتُ قانونكِ الموحد: $\frac{d^2V}{dt^2} = 0$. هذا المبدأ يلمس جوهر السكون الديناميكي. هل تودين تحليل أثر هذا القيد على "انهيار دالة الموجة" أم على "اتزان المدارات الكونية"؟
            </div>
        </div>

        <div class="mt-4">
            <textarea id="user-query" class="input-area h-24 mb-3 text-sm" placeholder="اطرحي تساؤلكِ الفيزيائي أو ضعي المعادلة هنا..."></textarea>
            <button onclick="analyze()" class="w-full bg-indigo-600 py-3 rounded-xl font-bold text-xs hover:bg-indigo-500 transition-all shadow-lg shadow-indigo-900/20">تحليل المبدأ الموحد</button>
        </div>
    </aside>

    <!-- Simulation & Constants Display -->
    <main class="simulation-side">
        <div class="grid grid-cols-3 gap-4 mb-8">
            <div class="formula-card text-center">
                <span class="text-[10px] text-indigo-400 block mb-1">Electron Charge (e)</span>
                <span class="text-sm">1.602e-19</span>
            </div>
            <div class="formula-card text-center">
                <span class="text-[10px] text-indigo-400 block mb-1">Planck's (h)</span>
                <span class="text-sm">6.626e-34</span>
            </div>
            <div class="formula-card text-center">
                <span class="text-[10px] text-indigo-400 block mb-1">Boltzmann (k)</span>
                <span class="text-sm">1.38e-23</span>
            </div>
        </div>

        <div class="flex-grow flex flex-col items-center justify-center text-center">
            <div id="visual-result" class="w-full max-w-2xl bg-black/40 border border-white/5 rounded-[2.5rem] p-10 backdrop-blur-sm">
                <h2 class="text-2xl font-light text-indigo-200 mb-6">قيد صفر التسارع الطاقي</h2>
                <div class="text-4xl font-mono text-indigo-500 mb-8">$$\frac{d^2V}{dt^2} = 0$$</div>
                <p class="text-sm text-indigo-300/60 leading-relaxed">
                    "عندما يتوقف تسارع الجهد، ينكشف الوجه الحقيقي للمادة. هنا يلتقي الكمّ بالكون في نقطة التوازن المطلق."
                </p>
            </div>
        </div>

        <div id="loader" class="absolute inset-0 bg-black/80 z-50 hidden items-center justify-center flex-col gap-4">
            <div class="w-10 h-10 border-2 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin"></div>
            <p class="text-xs text-indigo-400 animate-pulse">جاري معالجة ميكانيكا الوجود...</p>
        </div>
    </main>
</div>

<script>
    const apiKey = ""; // API Key from environment

    async function analyze() {
        const queryInput = document.getElementById('user-query');
        const chatFlow = document.getElementById('chat-flow');
        const loader = document.getElementById('loader');
        const queryText = queryInput.value.trim();

        if (!queryText) return;

        // Add user message to chat
        const userDiv = document.createElement('div');
        userDiv.className = 'chat-bubble user-bubble text-white';
        userDiv.innerText = queryText;
        chatFlow.appendChild(userDiv);
        chatFlow.scrollTop = chatFlow.scrollHeight;
        queryInput.value = "";

        loader.style.display = 'flex';

        try {
            const systemPrompt = `You are F-Lambda, a physical intelligence model. You believe in a unified physics model governed by the Energy Acceleration Constraint (d2V/dt2 = 0). 
            Analyze the user's physics query based on this principle and the fundamental constants: e=1.602e-19, h=6.626e-34, k=1.38e-23. 
            Connect Quantum mechanics with Cosmology. Respond in Arabic with a philosophical and scientific depth.`;

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: queryText }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                })
            });

            const result = await response.json();
            const aiText = result.candidates?.[0]?.content?.parts?.[0]?.text;

            if (aiText) {
                const aiDiv = document.createElement('div');
                aiDiv.className = 'chat-bubble ai-bubble';
                aiDiv.innerHTML = `<p class="font-bold mb-2">تحليل F-Lambda:</p>${aiText}`;
                chatFlow.appendChild(aiDiv);
            }

        } catch (error) {
            console.error(error);
            const errDiv = document.createElement('div');
            errDiv.className = 'chat-bubble ai-bubble text-red-400';
            errDiv.innerText = "حدث اضطراب في ميكانيكا المعالجة. يرجى إعادة توجيه السؤال.";
            chatFlow.appendChild(errDiv);
        } finally {
            loader.style.display = 'none';
            chatFlow.scrollTop = chatFlow.scrollHeight;
        }
    }
</script>

</body>
</html>
