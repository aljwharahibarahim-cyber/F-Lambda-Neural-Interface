<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F-Lambda | Sovereign Verification Core</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;600;900&family=JetBrains+Mono&display=swap');
        
        :root {
            --f-black: #000000;
            --f-indigo: #4f46e5;
            --f-success: #10b981;
        }

        body { 
            font-family: 'Noto Sans Arabic', sans-serif; 
            background: var(--f-black); 
            color: #fff; 
            min-height: 100vh; 
            margin: 0;
            display: flex;
            flex-direction: column;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        .f-card {
            background: rgba(10, 10, 15, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 2.5rem;
        }

        .verify-badge {
            background: rgba(16, 185, 129, 0.1);
            color: var(--f-success);
            border: 1px solid rgba(16, 185, 129, 0.2);
            padding: 2px 10px;
            border-radius: 5px;
            font-size: 10px;
        }

        .factor-item {
            background: #fff;
            color: #000;
            padding: 0.8rem 1.5rem;
            border-radius: 1rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .multiplier-symbol {
            color: #4f46e5;
            font-weight: bold;
        }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-6xl mx-auto w-full">
        <!-- Header -->
        <header class="flex justify-between items-center mb-10">
            <div class="flex items-center gap-4">
                <div class="w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center font-black text-xl">Fλ</div>
                <div>
                    <h1 class="text-xl font-black">نظام التفكيك والتحقق السيادي</h1>
                    <p class="text-[9px] font-mono text-slate-500 uppercase">F=15.0725 // Damping=7.5362</p>
                </div>
            </div>
            <div id="masterStatus" class="hidden flex items-center gap-2">
                <span class="verify-badge">تم إثبات العوامل حتمياً</span>
            </div>
        </header>

        <main class="space-y-8">
            <!-- Input -->
            <div class="f-card p-8">
                <label class="text-[10px] uppercase text-slate-500 mb-3 block">إدخال الكتلة المركبة (العدد الضخم)</label>
                <textarea id="hugeInput" class="w-full h-40 bg-black/50 border border-white/5 rounded-2xl p-6 mono text-2xl text-indigo-400 outline-none focus:border-indigo-500/50 transition-all custom-scroll" placeholder="أدخل العدد هنا..."></textarea>
                <button onclick="processAndVerify()" id="mainBtn" class="w-full mt-6 bg-white text-black py-5 rounded-xl font-black text-lg hover:bg-indigo-600 hover:text-white transition-all">تفكيك وتحقق (V''=0)</button>
            </div>

            <!-- Results & Proof -->
            <div id="resultsArea" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Factors Grid -->
                <div class="lg:col-span-7 f-card p-8">
                    <h3 class="text-xs font-bold text-slate-500 uppercase mb-6">المدارات المستخرجة (عوامل التكوين)</h3>
                    <div id="factorList" class="flex flex-wrap gap-3">
                        <!-- Factors here -->
                    </div>
                </div>

                <!-- Mathematical Proof -->
                <div class="lg:col-span-5 f-card p-8 border-l-4 border-l-green-500">
                    <h3 class="text-xs font-bold text-green-500 uppercase mb-6">برهان إعادة البناء (Proof of Origin)</h3>
                    <div class="space-y-4">
                        <div class="bg-black/40 p-4 rounded-xl border border-white/5">
                            <span class="text-[9px] text-slate-500 block mb-1 uppercase">حاصل ضرب العوامل:</span>
                            <div id="productResult" class="mono text-sm text-green-400 break-all leading-tight"></div>
                        </div>
                        <div id="matchIndicator" class="text-[10px] font-bold py-2 px-4 rounded-lg text-center uppercase">
                            <!-- Match/Mismatch -->
                        </div>
                        <p class="text-[11px] text-slate-400 italic leading-relaxed">
                            هذا البرهان يؤكد أن المدارات المستخرجة هي "الجينات" الفعلية التي تشكل العدد المركب. عندما نضربها، نعود لنفس نقطة الصفر الديكارتية.
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        function processAndVerify() {
            const inputStr = document.getElementById('hugeInput').value.replace(/\s/g, '');
            if (!inputStr || !/^\d+$/.test(inputStr)) return;

            const btn = document.getElementById('mainBtn');
            const resultArea = document.getElementById('resultsArea');
            const factorList = document.getElementById('factorList');
            const productDisplay = document.getElementById('productResult');
            const matchIndicator = document.getElementById('matchIndicator');
            const masterStatus = document.getElementById('masterStatus');

            btn.disabled = true;
            btn.innerText = "جاري التفكيك والتحقق الحتمي...";

            let n = BigInt(inputStr);
            let factors = [];
            let d = 2n;
            let tempN = n;

            setTimeout(() => {
                // التفكيك
                while (d * d <= tempN) {
                    while (tempN % d === 0n) {
                        factors.push(d);
                        tempN /= d;
                    }
                    d++;
                    if (d > 1000000n) break; 
                }
                if (tempN > 1n) factors.push(tempN);

                // التحقق (إعادة الضرب)
                let product = 1n;
                factors.forEach(f => product *= f);

                // العرض
                factorList.innerHTML = "";
                factors.forEach(f => {
                    const el = document.createElement('div');
                    el.className = "factor-item mono";
                    el.innerHTML = `<span>${f.toString()}</span>`;
                    factorList.appendChild(el);
                });

                productDisplay.innerText = product.toString();

                if (product === n) {
                    matchIndicator.innerText = "✓ تطابق كامل: العوامل تعيد إنشاء العدد الأصلي";
                    matchIndicator.className = "text-[10px] font-bold py-2 px-4 rounded-lg text-center uppercase bg-green-500/10 text-green-500 border border-green-500/20";
                    masterStatus.classList.remove('hidden');
                } else {
                    matchIndicator.innerText = "⚠ تنبيه: المدارات المكتشفة وسيطة (نواة مركبة)";
                    matchIndicator.className = "text-[10px] font-bold py-2 px-4 rounded-lg text-center uppercase bg-yellow-500/10 text-yellow-500 border border-yellow-500/20";
                }

                resultArea.classList.remove('hidden');
                btn.disabled = false;
                btn.innerText = "تفكيك وتحقق (V''=0)";
            }, 800);
        }
    </script>
</body>
</html>

