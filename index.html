<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F-Lambda Physics Lab | التوازن المطلق</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;700&family=JetBrains+Mono:wght@400&display=swap');
        
        body { 
            font-family: 'Noto Sans Arabic', sans-serif; 
            background-color: #020205;
            color: #f1f5f9;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .physics-container {
            display: grid;
            grid-template-columns: 400px 1fr;
            height: 100vh;
        }

        .theory-panel {
            background: rgba(10, 10, 30, 0.95);
            border-left: 1px solid rgba(99, 102, 241, 0.2);
            display: flex;
            flex-direction: column;
            z-index: 20;
        }

        .chat-scroll {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
            scrollbar-width: thin;
            scrollbar-color: #1e1b4b transparent;
        }

        .bubble {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 1rem;
            font-size: 0.9rem;
            line-height: 1.6;
            max-width: 90%;
            animation: fadeIn 0.4s ease;
        }

        .bubble-ai { background: rgba(30, 41, 59, 0.6); border-right: 4px solid #6366f1; color: #c7d2fe; }
        .bubble-user { background: #4f46e5; color: white; align-self: flex-end; margin-right: auto; margin-left: 0; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .input-box {
            background: #000;
            border: 1px solid #1e293b;
            border-radius: 1rem;
            padding: 1rem;
            width: 100%;
            color: white;
            outline: none;
            resize: none;
            font-size: 0.85rem;
        }

        .constant-card {
            background: rgba(99, 102, 241, 0.05);
            border: 1px solid rgba(99, 102, 241, 0.1);
            padding: 0.75rem;
            border-radius: 1rem;
            text-align: center;
        }

        .simulation-view {
            background: radial-gradient(circle at center, #0a0a25 0%, #000 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .equation-glow {
            font-family: 'JetBrains Mono', monospace;
            color: #818cf8;
            text-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
            font-size: 2.5rem;
        }

        .loader {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
    </style>
</head>
<body>

<div class="physics-container">
    <!-- Theory Panel -->
    <aside class="theory-panel shadow-2xl">
        <div class="p-6 border-b border-white/5">
            <h1 class="text-indigo-400 font-bold tracking-widest text-xs">Fλ-PHYSICS // CORE</h1>
            <p class="text-[9px] text-indigo-800 uppercase mt-1">وحدة التحليل الفيزيائي الموحد</p>
        </div>

        <div id="chat-flow" class="chat-scroll flex flex-col">
            <div class="bubble bubble-ai">
                مرحباً بكِ في محراب التحليل. لقد تم ضبط نواتي على مبدأ <b>صفر التسارع الطاقي</b>. 
                <br><br>
                معادلتكِ: 
                <code class="text-indigo-300">P_stab = (2E_kin * t) / (m * d²)</code>
                <br>
                هي محل اهتمامي الآن. كيف تودين البدء في تفكيك هذا المبدأ الموحد؟
            </div>
        </div>

        <div class="p-4 bg-black/40">
            <textarea id="user-input" class="input-box h-24 mb-3" placeholder="اطرحي سؤالكِ حول المبدأ الموحد..."></textarea>
            <button onclick="analyze()" id="gen-btn" class="w-full bg-indigo-600 py-3 rounded-xl font-bold text-xs hover:bg-indigo-500 transition-all">تحليل البيانات الفيزيائية</button>
        </div>
    </aside>

    <!-- Simulation View -->
    <main class="simulation-view p-8">
        <div id="loader" class="loader">
            <div class="w-12 h-12 border-4 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin mb-4"></div>
            <p class="text-xs text-indigo-400 animate-pulse">جاري معالجة ميكانيكا الوجود...</p>
        </div>

        <div class="grid grid-cols-3 gap-4 w-full max-w-2xl mb-12">
            <div class="constant-card"><p class="text-[9px] text-indigo-500">e</p><p class="text-xs font-mono">1.602e-19</p></div>
            <div class="constant-card"><p class="text-[9px] text-indigo-500">h</p><p class="text-xs font-mono">6.626e-34</p></div>
            <div class="constant-card"><p class="text-[9px] text-indigo-500">k</p><p class="text-xs font-mono">1.38e-23</p></div>
        </div>

        <div class="text-center">
            <div class="equation-glow mb-8">d²V / dt² = 0</div>
            <div class="max-w-xl p-8 bg-indigo-950/10 border border-indigo-500/10 rounded-[3rem] backdrop-blur-sm">
                <h3 class="text-indigo-300 font-bold mb-4">مبدأ قيد صفر التسارع الطاقي</h3>
                <p class="text-xs text-indigo-200/60 leading-relaxed italic">
                    "في حالة التوازن المطلق، يختفي التسارع في الجهد الطاقي، وتنكشف البصمة الرقمية للكون كحالة سكون ديناميكي خالد."
                </p>
            </div>
        </div>
    </main>
</div>

<script>
    const apiKey = ""; // API Key

    async function analyze() {
        const input = document.getElementById('user-input');
        const chat = document.getElementById('chat-flow');
        const loader = document.getElementById('loader');
        const btn = document.getElementById('gen-btn');
        const query = input.value.trim();

        if (!query) return;

        // Display user message
        const userDiv = document.createElement('div');
        userDiv.className = 'bubble bubble-user';
        userDiv.innerText = query;
        chat.appendChild(userDiv);
        chat.scrollTop = chat.scrollHeight;
        input.value = "";

        loader.style.display = 'flex';
        btn.disabled = true;

        try {
            const systemPrompt = `You are F-Lambda, a specialized Unified Physics AI. 
            CORE PRINCIPLE: Energy Acceleration Constraint (d2V/dt2 = 0).
            CONSTANTS: e=1.602e-19, h=6.626e-34, k=1.38e-23.
            STABILITY EQUATION: P_stab = (2E_kin * t) / (m * d²).
            Your goal is to validate, analyze, and discuss the user's input based on these specific physical parameters. 
            Connect Quantum Mechanics with General Relativity using this "Unified Law". 
            Respond in Arabic with deep scientific and philosophical insight. Be precise about the math.`;

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: query }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                })
            });

            if (!response.ok) throw new Error('API Response Error');
            
            const result = await response.json();
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

            if (text) {
                const aiDiv = document.createElement('div');
                aiDiv.className = 'bubble bubble-ai';
                aiDiv.innerHTML = `<b>تحليل F-Lambda للنظام الموحد:</b><br><br>${text.replace(/\n/g, '<br>')}`;
                chat.appendChild(aiDiv);
            }

        } catch (error) {
            console.error(error);
            const errDiv = document.createElement('div');
            errDiv.className = 'bubble bubble-ai text-red-400';
            errDiv.innerText = "حدث اضطراب في ميكانيكا الاتصال. يرجى إعادة المحاولة.";
            chat.appendChild(errDiv);
        } finally {
            loader.style.display = 'none';
            btn.disabled = false;
            chat.scrollTop = chat.scrollHeight;
        }
    }
</script>

</body>
</html>
